databaseChangeLog:
  - changeSet:
      id: v1-5
      author: Mikhail Kondratsiuk
      changes:
        - createTable:
                   tableName: order_items
                   columns:
                     - column:
                         name: order_id
                         type: bigint
                         constraints:
                           nullable: false
                           foreignKeyName: order_id_fk
                           references: orders(id)
                     - column:
                         name: product_id
                         type: bigint
                         constraints:
                           nullable: false
                           foreignKeyName: product_id_fk
                           references: products(id)
      rollback:
        - dropTable:
            tableName: order_items
        - dropAllForeignKeyConstraints:
            baseTableName: order_items
  - changeSet:
      id: v1-5-1
      author: Mikhail Kondratsiuk
      preConditions:
        - onFail: MARK_RAN
        - tableExists:
            tableName: order_items
        - tableIsEmpty:
            tableName: order_items
      changes:
          - loadData:
              file: db/data/order_items.csv
              tableName: order_items